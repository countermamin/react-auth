{"version":3,"sources":["components/Login/Login.module.css","components/UI/Input/Input.module.css","components/UI/Card/Card.module.css","components/UI/Button/Button.module.css","components/Home/Home.module.css","components/MainHeader/Navigation.module.css","components/MainHeader/MainHeader.module.css","components/UI/Card/Card.js","components/UI/Button/Button.js","store/auth-context.js","components/UI/Input/Input.js","components/Login/Login.js","components/Home/Home.js","components/MainHeader/Navigation.js","components/MainHeader/MainHeader.js","App.js","index.js"],"names":["module","exports","Card","props","className","styles","card","children","Button","type","button","onClick","disabled","AuthContext","React","createContext","isLoggedIn","onLogout","onLogin","email","password","AuthContextProvider","useState","setIsLoggedIn","useEffect","localStorage","getItem","Provider","value","removeItem","setItem","Input","forwardRef","ref","inputRef","useRef","activate","current","focus","useImperativeHandle","control","isValid","invalid","htmlFor","id","label","onChange","onBlur","emailReducer","prevState","action","includes","passwordReducer","trim","length","Login","formIsValid","setFormIsValid","useReducer","undefined","emailState","dispatchEmailState","passwordState","dispatchPasswordState","emailIsValid","passwordIsValid","ctx","useContext","emailInputRef","passwordInputRef","timer","setTimeout","console","log","clearTimeout","login","onSubmit","event","preventDefault","target","actions","btn","Home","home","Navigation","nav","href","MainHeader","App","Fragment","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6f6e6fa9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__vBSrp\",\"actions\":\"Login_actions__1fCeI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"control\":\"Input_control__15e1e\",\"invalid\":\"Input_invalid__1jnvD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__3c7kb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3mGGZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__1GDIv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__38AwU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main-header\":\"MainHeader_main-header__3QkwA\"};","import React from \"react\";\n\nimport styles from \"./Card.module.css\";\n\nconst Card = (props) => {\n  return (\n    <div className={`${styles.card} ${props.className}`}>{props.children}</div>\n  );\n};\n\nexport default Card;\n","import React from \"react\";\n\nimport styles from \"./Button.module.css\";\n\nconst Button = (props) => {\n  return (\n    <button\n      type={props.type || \"button\"}\n      className={`${styles.button} ${props.className}`}\n      onClick={props.onClick}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { useState, useEffect } from 'react';\r\n\r\nconst AuthContext = React.createContext({\r\n\tisLoggedIn: false,\r\n\tonLogout: () => {},\r\n\tonLogin: (email, password) => {},\r\n});\r\n\r\nexport const AuthContextProvider = props => {\r\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst storedLoginInfo = localStorage.getItem('isLoggedIn');\r\n\r\n\t\tif (storedLoginInfo === '1') {\r\n\t\t\tsetIsLoggedIn(true);\r\n\t\t}\r\n\t}, []);\r\n\r\n\tconst logoutHandler = () => {\r\n\t\tlocalStorage.removeItem('isLoggedIn');\r\n\t\tsetIsLoggedIn(false);\r\n\t};\r\n\r\n\tconst loginHandler = () => {\r\n\t\tlocalStorage.setItem('isLoggedIn', '1');\r\n\t\tsetIsLoggedIn(true);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tisLoggedIn: isLoggedIn,\r\n\t\t\t\tonLogout: logoutHandler,\r\n\t\t\t\tonLogin: loginHandler,\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{props.children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n\r\nexport default AuthContext;\r\n","import React, { useRef, useImperativeHandle } from 'react';\r\nimport styles from './Input.module.css';\r\n\r\nconst Input = React.forwardRef((props, ref) => {\r\n\tconst inputRef = useRef();\r\n\r\n\t// useEffect(() => {\r\n\t// \tinputRef.current.focus();\r\n\t// }, []);\r\n\r\n\tconst activate = () => {\r\n\t\tinputRef.current.focus();\r\n\t};\r\n\r\n\tuseImperativeHandle(ref, () => {\r\n\t\treturn {\r\n\t\t\tfocus: activate,\r\n\t\t};\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`${styles.control} ${\r\n\t\t\t\tprops.isValid === false ? styles.invalid : ''\r\n\t\t\t}`}\r\n\t\t>\r\n\t\t\t<label htmlFor={props.id}>{props.label}</label>\r\n\t\t\t<input\r\n\t\t\t\tref={inputRef}\r\n\t\t\t\ttype={props.type}\r\n\t\t\t\tid={props.id}\r\n\t\t\t\tvalue={props.value}\r\n\t\t\t\tonChange={props.onChange}\r\n\t\t\t\tonBlur={props.onBlur}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default Input;\r\n","import React, {\n\tuseState,\n\tuseReducer,\n\tuseEffect,\n\tuseContext,\n\tuseRef,\n} from 'react';\n\nimport Card from '../UI/Card/Card';\nimport styles from './Login.module.css';\nimport Button from '../UI/Button/Button';\nimport AuthContext from '../../store/auth-context';\nimport Input from '../UI/Input/Input';\n\nconst emailReducer = (prevState, action) => {\n\tif (action.type === 'USER_INPUT') {\n\t\treturn {\n\t\t\tvalue: action.value,\n\t\t\tisValid: action.value.includes('@'),\n\t\t};\n\t}\n\tif (action.type === 'INPUT_BLUR') {\n\t\treturn {\n\t\t\tvalue: prevState.value,\n\t\t\tisValid: prevState.value.includes('@'),\n\t\t};\n\t}\n\treturn {\n\t\tvalue: '',\n\t\tisValid: false,\n\t};\n};\nconst passwordReducer = (prevState, action) => {\n\tif (action.type === 'USER_INPUT') {\n\t\treturn {\n\t\t\tvalue: action.value,\n\t\t\tisValid: action.value.trim().length > 7,\n\t\t};\n\t}\n\tif (action.type === 'INPUT_BLUR') {\n\t\treturn {\n\t\t\tvalue: prevState.value,\n\t\t\tisValid: prevState.value.trim().length > 7,\n\t\t};\n\t}\n\treturn {\n\t\tvalue: '',\n\t\tisValid: false,\n\t};\n};\n\nconst Login = props => {\n\t// const [inputEmail, setInputEmail] = useState('');\n\t// const [emailIsValid, setEmailIsValid] = useState();\n\t// const [inputPassword, setInputPassword] = useState('');\n\t// const [passwordIsValid, setPasswordIsValid] = useState();\n\tconst [formIsValid, setFormIsValid] = useState(false);\n\n\tconst [emailState, dispatchEmailState] = useReducer(emailReducer, {\n\t\tvalue: '',\n\t\tisValid: undefined,\n\t});\n\tconst [passwordState, dispatchPasswordState] = useReducer(passwordReducer, {\n\t\tvalue: '',\n\t\tisValid: undefined,\n\t});\n\n\tconst { isValid: emailIsValid } = emailState;\n\tconst { isValid: passwordIsValid } = passwordState;\n\n\tconst ctx = useContext(AuthContext);\n\n\tconst emailInputRef = useRef();\n\tconst passwordInputRef = useRef();\n\n\tuseEffect(() => {\n\t\tconst timer = setTimeout(() => {\n\t\t\tconsole.log('EffectFunc');\n\t\t\tsetFormIsValid(emailIsValid && passwordIsValid);\n\t\t}, 1000);\n\n\t\treturn () => {\n\t\t\tconsole.log('Clear');\n\t\t\tclearTimeout(timer);\n\t\t};\n\t}, [emailIsValid, passwordIsValid]);\n\n\tconst emailChangeHandler = event => {\n\t\tdispatchEmailState({ type: 'USER_INPUT', value: event.target.value });\n\n\t\t//setFormIsValid(emailState.value.includes('@') && passwordState.isValid);\n\t};\n\n\tconst passwordChangeHandler = event => {\n\t\tdispatchPasswordState({ type: 'USER_INPUT', value: event.target.value });\n\t\t//setFormIsValid(passwordState.isValid && emailState.isValid);\n\t};\n\n\tconst validateEmailHandler = () => {\n\t\tdispatchEmailState({ type: 'INPUT_BLUR' });\n\t};\n\n\tconst validatePasswordHandler = () => {\n\t\tdispatchPasswordState({ type: 'INPUT_BLUR' });\n\t};\n\n\tconst submitHandler = event => {\n\t\tevent.preventDefault();\n\t\tif (formIsValid) {\n\t\t\tctx.onLogin(emailState.value, passwordState.value);\n\t\t} else if (!emailIsValid) {\n\t\t\temailInputRef.current.focus();\n\t\t} else {\n\t\t\tpasswordInputRef.current.focus();\n\t\t}\n\t};\n\n\treturn (\n\t\t<Card className={styles.login}>\n\t\t\t<form onSubmit={submitHandler}>\n\t\t\t\t<Input\n\t\t\t\t\tref={emailInputRef}\n\t\t\t\t\tid='email'\n\t\t\t\t\tlabel='Email'\n\t\t\t\t\ttype='email'\n\t\t\t\t\tisValid={emailIsValid}\n\t\t\t\t\tvalue={emailState.value}\n\t\t\t\t\tonChange={emailChangeHandler}\n\t\t\t\t\tonBlur={validateEmailHandler}\n\t\t\t\t/>\n\t\t\t\t<Input\n\t\t\t\t\tref={passwordInputRef}\n\t\t\t\t\tid='password'\n\t\t\t\t\tlabel='Пароль'\n\t\t\t\t\ttype='password'\n\t\t\t\t\tisValid={passwordIsValid}\n\t\t\t\t\tvalue={passwordState.value}\n\t\t\t\t\tonChange={passwordChangeHandler}\n\t\t\t\t\tonBlur={validatePasswordHandler}\n\t\t\t\t/>\n\n\t\t\t\t<div className={styles.actions}>\n\t\t\t\t\t<Button type='submit' className={styles.btn}>\n\t\t\t\t\t\tВход\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</Card>\n\t);\n};\n\nexport default Login;\n","import React, { useContext } from 'react';\nimport AuthContext from '../../store/auth-context';\nimport Button from '../UI/Button/Button';\n\nimport Card from '../UI/Card/Card';\nimport styles from './Home.module.css';\n\nconst Home = props => {\n\tconst ctx = useContext(AuthContext);\n\treturn (\n\t\t<Card className={styles.home}>\n\t\t\t<h1>Рады Вас Видеть Снова!</h1>\n\t\t\t<Button onClick={ctx.onLogout}>Выход</Button>\n\t\t</Card>\n\t);\n};\n\nexport default Home;\n","import React, { useContext } from 'react';\nimport AuthContext from '../../store/auth-context';\n\nimport styles from './Navigation.module.css';\n\nconst Navigation = () => {\n\tconst ctx = useContext(AuthContext);\n\treturn (\n\t\t<nav className={styles.nav}>\n\t\t\t<ul>\n\t\t\t\t{ctx.isLoggedIn && (\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href='/'>Пользователи</a>\n\t\t\t\t\t</li>\n\t\t\t\t)}\n\t\t\t\t{ctx.isLoggedIn && (\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href='/'>Админ</a>\n\t\t\t\t\t</li>\n\t\t\t\t)}\n\t\t\t\t{ctx.isLoggedIn && (\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<button onClick={ctx.onLogout}>Выйти</button>\n\t\t\t\t\t</li>\n\t\t\t\t)}\n\t\t\t</ul>\n\t\t</nav>\n\t);\n};\n\nexport default Navigation;\n","import React from 'react';\n\nimport Navigation from './Navigation';\nimport styles from './MainHeader.module.css';\n\nconst MainHeader = props => {\n\treturn (\n\t\t<header className={styles['main-header']}>\n\t\t\t<h1>React Advanced</h1>\n\t\t\t<Navigation />\n\t\t</header>\n\t);\n};\n\nexport default MainHeader;\n","import Login from './components/Login/Login';\nimport Home from './components/Home/Home';\nimport MainHeader from './components/MainHeader/MainHeader';\nimport React, { useContext } from 'react';\nimport AuthContext from './store/auth-context';\n\nfunction App() {\n\tconst ctx = useContext(AuthContext);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<MainHeader />\n\t\t\t<main>\n\t\t\t\t{!ctx.isLoggedIn && <Login />}\n\t\t\t\t{ctx.isLoggedIn && <Home />}\n\t\t\t</main>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport { AuthContextProvider } from './store/auth-context';\n\nReactDOM.render(\n\t<AuthContextProvider>\n\t\t<App />\n\t</AuthContextProvider>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}